# План автоматизации

## 1.Перечень автоматизируемых сценариев (Тестинг интерфейса, UI Testing.)

предусловие: Приложение загрузилось на порту 8080, открыта страница покупки тура в Марракеш

ожидаемый результат: Приложение должно в собственной СУБД сохранять информацию о том, каким способом был совершён платёж 
и успешно ли он был совершён (при этом данные карт сохранять не допускается).

К валидным данным относятся:
1. Номер карты из 16 цифр
2. Поле владелец карты: фамилия, имя латинскими буквами, не пустое поле
3. Срок действия карты: 
   - месяц 01-12, не ранее текущего, если используется текущий год
   - год из двух цифр, не ранее текущего
4. Код CVC из трех цифр, не все нули



###   * Сценарий 1. Happy patch. Оплата по карте со статусом APPROVED
   
   - Нажать кнопку "Купить" на главной странице сервиса http://localhost:8080/
   - Ввести номер карты 4444 4444 4444 4441, остальные поля заполнены валидными данными (например, Месяц - 09, Год - 24, Владелец - Petrov Ivan, CVC/CVV - 123)
   - Нажать кнопку "Продолжить"
   - Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED


###   * Сценарий 2. Happy patch. Кредит по данным карты со статусом APPROVED
   - Нажать кнопку "Купить в кредит" на главной странице сервиса http://localhost:8080/
   - Ввести номер карты 4444 4444 4444 4441, остальные поля заполнены валидными данными (например, Месяц - 09, Год - 24, Владелец - Petrov Ivan, CVC/CVV - 123)
   - Нажать кнопку "Продолжить"
   - Ожидаемый результат: появилось всплывающее окно "Операция одобрена Банком", в БД в payment_entity появилась запись со статусом APPROVED

###   * Сценарий 3. Happy patch. Оплата по карте со статусом DECLINED
   - Нажать кнопку "Купить" на главной странице сервиса http://localhost:8080/
   - Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями (например, Месяц - 09, Год - 24, Владелец - Petrov Ivan, CVC/CVV - 123)
   - Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в payment_entity появилась запись со статусом DECLINED

###   * Сценарий 4. Happy patch. Кредит по данным карты со статусом DECLINED
   - Нажать кнопку "Купить в кредит" на главной странице сервиса http://localhost:8080/
   - Номер карты 4444 4444 4444 4442, остальные поля заполнены корректными значениями (например, Месяц - 09, Год - 24, Владелец - Petrov Ivan, CVC/CVV - 123)
   - Ожидаемый результат: появилось всплывающее окно "Ошибка! Банк отказал в проведении операции", в БД в credit_request_entity появилась запись со статусом DECLINED


###  * Негативный сценарий. 

   - Проверить реакцию системы на попытку использования отклоненной карты - покупка в таком случае не может быть успешно совершена, 
     тут проверяются случаи приобретения с использованием дебетовой карты и приобретение в кредит.
   - Проверить валидацию полей формы. Ввести невалидные значения по очереди в каждое поле формы. 
     Для подбора тестовых данных можно использовать методы эквивалентного разбиения и граничных значений.
     В текстовые поля можно попробовать вести спецсимволы и цифры, в цифровые - спецсимволы и текст. 
     Попробовать ввести длинные и короткие строки, логически невозможные значения, например 13 месяц, владелец по русски. 
     Поработать с датами, попробуйте прошлый месяц и дату более чем на шесть лет отстоящую от текущей. 
     Попробовать карту не из набора.
     попробовать пустые значения для всех полей и нули в цифровых полях по очереди и для двух случаев.


## 2. Перечень используемых инструментов с обоснованием выбора

    - Git и GitHub — хранение кода, в том числе автотестов;
    - JUnit4, JUnit5, TestNG — платформы для написания автотестов и их запуска;
    - Java 11 — язык написания автотестов;
    - Maven, Gradle — системы управления проектами
    - IntelliJ IDEA (среда разработки (комплекс программных средств, для написания, исполнения, отладки и оптимизации
      кода)
    - Selenium (инструмент для автоматизации действий веб-браузера)
    - протокол HTTP (инструмент (транспорт) для доставки информации от клиента к серверу при тестировании API)
    - Faker — библиотека, которая позволяет генерировать случайные данные. С ее помощью можно заполнить форму с данными для отправки, сформировать JSON-ответы для REST.
    - Проект Lombok — добавляет в Java новые «ключевые слова» и превращает аннотации в Java-код, 
      уменьшая усилия на разработку.
    - паттерн PageFactory — специальный объект или метод, занимающийся созданием и инициализацией объектов из классов.
    - репортинг (Allure) - дает информацию о статусе продукта в данный момент (количество оставшихся неисправленных ошибок, 
      полностью ли протестирован продукт или требуется дополнительное тестирование 
    - Docker и Docker compose для запуска симулятора;
    
## 3. Перечень и описание возможных рисков при автоматизации

    - проблемы с поиском локаторов: с помощью локатора на странице можно найти элементы. Если возможно, лучше использовать CSS (набор уникальных атрибутов элемента), 
      в случае использования XPath (путь к элементу) может возникнуть риск того, что пучть изменится и элемент не будет найден 
    - опасность уронить сайт, 
    - изменение структуры сайта в ходе реализации проекта.
    - нет технической документации, поэтому трудно понять какое действие системы считать нормой, 
      например, какие требования к полям ввода данных, какие сообщения должны высвечиваться при корректном вводе данных и некорректном 

## 4. Интервальная оценка с учётом рисков (в часах)

    - 160 часов

## 5. План сдачи работ (когда будут авто-тесты, результаты их прогона и отчёт по автоматизации)
    - написание плана до 13.05.2022
    - проверить поддержку двух СУБД: MySQL и PostgreSQL до 17.05.2022
    - написание автотестов покупки тура  до 27.05.2022
    - Подготовке отчётных документов по итогам автоматизированного тестирования  до 30.05.2022
    - Подготовка отчётных документов по итогам автоматизации   до 04.06.2022